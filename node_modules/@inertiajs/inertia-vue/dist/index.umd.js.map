{"version":3,"file":"index.umd.js","sources":["../src/link.js","../src/remember.js","../src/app.js"],"sourcesContent":["import { Inertia, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n      required: true,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: false,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    }\n  },\n  render(h, { props, data, children }) {\n    return h('a', {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        href: props.href,\n      },\n      on: {\n        ...(data.on || {}),\n        click: event => {\n          if (data.on && data.on.click) {\n            data.on.click(event)\n          }\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(props.href, {\n              data: props.data,\n              method: props.method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState,\n              only: props.only,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const stateKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key()\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(stateKey)\n\n    this.$options.remember.data.forEach(key => {\n      if (restored !== undefined && restored[key] !== undefined) {\n        this[key] = restored[key]\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          this.$options.remember.data.reduce((data, key) => ({ ...data, [key]: this[key] }), {}),\n          stateKey\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\nimport Link from './link'\nimport Remember from './remember'\n\nlet app = {}\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    resolveComponent: {\n      type: Function,\n      required: true,\n    },\n    transformProps: {\n      type: Function,\n      default: props => props,\n    },\n  },\n  data() {\n    return {\n      component: null,\n      props: {},\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    Inertia.init({\n      initialPage: this.initialPage,\n      resolveComponent: this.resolveComponent,\n      updatePage: (component, props, { preserveState }) => {\n        this.component = component\n        this.props = this.transformProps(props)\n        this.key = preserveState ? this.key : Date.now()\n      },\n    })\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.props,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        }\n\n        return h(this.component.layout, [child])\n      }\n\n      return child\n    }\n  },\n  install(Vue) {\n    Object.defineProperty(Vue.prototype, '$inertia', { get: () => Inertia })\n    Object.defineProperty(Vue.prototype, '$page', { get: () => app.props })\n    Vue.mixin(Remember)\n    Vue.component('InertiaLink', Link)\n  },\n}\n"],"names":["functional","props","data","type","Object","default","href","String","required","method","replace","Boolean","preserveScroll","preserveState","only","Array","render","h","attrs","on","click","event","shouldIntercept","preventDefault","Inertia","visit","children","created","this","$options","remember","isArray","stateKey","key","Function","restored","restore","forEach","undefined","$watch","reduce","immediate","deep","app","name","initialPage","resolveComponent","transformProps","component","init","updatePage","Date","now","child","layout","install","Vue","defineProperty","prototype","get","mixin","Remember","Link"],"mappings":"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"}